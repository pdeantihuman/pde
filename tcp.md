# TCP

TCP连接是一种传输两个字节流的方法，每个方向一个流。为了将IP包中无序的、不可靠的字节映射到该流中有序的字节，每个流中的每个字节都由序列号标识。每个数据包都包含一段数据流作为其有效负载。TCP报头包含该段中第一个字节的序列号。TCP数据包可以包含一个确认，它是发送方希望接收的下一个字节的序列号(因此是接收之前所有字节的确认)。

序列号字段是32位。天真地说，这意味着每个字节流可以长达232字节，或4.3千兆字节。这是否意味着您不能使用普通的TCP连接下载大于4.3千兆字节的文件？否:当到达序列号232时，序列号再次绕回零！

由于这种环绕，流中的字节实际上没有唯一的识别序列号。那么，我们怎样才能识别一个包在谈论哪个字节呢？严格来说，答案是“我们不能”。(为了减轻这种情况，TCP可以使用时间戳来识别旧数据包，以便丢弃它们。下次再谈那次袭击。)

您可能希望流中的第一个字节具有索引0或1。但事实并非如此！相反，发送方在连接握手期间选择一个随机的“初始序列号”。(这种复杂性显然是为了减轻攻击，如果攻击者能够伪造其发送的IP数据包的源IP地址，攻击者就可以通过这种攻击假冒另一个IP地址。再说一遍，我下次会谈到这一点。)